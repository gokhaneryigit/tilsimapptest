# Automatically generated on 2021-06-26 UTC from https://codemagic.io/app/60d1d43f9b56df079576301f/settings
# Note that this configuration is not an exact match to UI settings. Review and adjust as necessary.

workflows:
  default-workflow:
    name: iOS Workflow
    # instance_type: mac_mini
    max_build_duration: 120
    environment:
      vars:
        XCODE_WORKSPACE: "Runner.xcworkspace"
        XCODE_SCHEME: "Runner"  
        APP_STORE_CONNECT_ISSUER_ID: Encrypted(Z0FBQUFBQmcxMTZmZ1BhenV1aDMtSnl4cmRWcm4yTG4zTzRacnQ0WndvSDN4ZjNEWE0xN0RwWVRKS3RMT3pwS1J4M0dwMkR5N3paakJ5VXcyeEx4NnRscDQ3Wm5mbXI3RW00OWR6V3hwNjk2M1hVLUxCVnJqelQ0WjQ5TmducG5SU3Q1QnZrNGJ4dks=)
        APP_STORE_CONNECT_KEY_IDENTIFIER: Encrypted(Z0FBQUFBQmcxMTY2VW5KMHZkWTFsVDFSYWlYLWFVdXhtbFpNNnl5dDRKaFUxTXZPVVRSYUtGWXhPNHU1MFJrQ2dKa0p1bVBPYVctdDVmcUk3U2VLSnU1SUxjcFJlZmxFOEE9PQ==)
        APP_STORE_CONNECT_PRIVATE_KEY: Encrypted(Z0FBQUFBQmcxMVNvcUlXNlN4NzJHNk84YklDLU5SMUJfWko1YzRTZGhmcDN1V25oT3N1dVpRa0RZd1BMTS1EZVhvUFp0STBYam5xb3prMzFLazJmMkZubHA1dnRPZENuUThvTUFaNkVQd3oxZHFKU01SenRvdDROZXNOalhvNkV4eGQzNExBSXluWmd3Z29fRG1NU0xvZGJwNno2Nng5NW1uQUQ0bnZXejRUdV9qTkRaeHFSeU1NOWNzQ3pVdW5XRXlrQl8tdF90eXBHRU1LMU9GQTQwNlh3LUVMaHMzTGxfaVhtdF9RQlktNy01NnNxWEVyUUtJUjU5Wmg3VUtOUGFxaUhhQkI1c3VnTUFQc2w0cThwdFdEaGJEM1p6Rld1OGdtLTFrNnZoaDhoRXpRblhHOFZqWllNNllrOWNjd0Zya2dwNGVkdWE5WXlmQnF2TmlBQmtaV2tHSnU0RHFQZDRTZTZ2NjE4dzNtZnB2WHJhS3JSTmlpc2o3Y2xIU1BLcGpoTy1DcXVrSEo5b01DRFRUN284N3o1NFNMcWd3el9QTDR3TGZMaTdPaXZFS213dkZIY3A5cz0=)
        APPLE_ID: Encrypted(Z0FBQUFBQmcxMTcxNmI5OTJ0bDJwbVZkOWw0V3NQdTJvTEhNQzJWRVVrUEswUVQ4c3JoNVMzYUYyX3pTZlRDQWt4XzNvN2pVQ0lGekF4eDNxTk9vcEtOZzJyMU9PX0pESjlqQ3liRll3LURLTlg0U3ZONHdOaFU9)
        CERTIFICATE_PRIVATE_KEY: Encrypted(Z0FBQUFBQmcxMVNvZlZJbFhoRy1Xa3NFVE9salFHS1BKcDlLaF9FZXBIVWVyNDNWUU8tQmgyUVJhNmJxUkVGZ2Z3SHo5Z1k5Mlg5cGtITU1VeEFKZGRPWHRQNVU1aGVEemVWU3VWelB0RUhHcU9aWE4wV0RmRDNyTGVRelR1NkcyWldGT2g0MUduMzFXQVUtcTVTTEdLVFd3TmRWYUxnN0M1T2JjQmxlV1VSalBWT3hmUmxQT1VSVElIUlNmN0VudFR1alRBd013SUpEY2Y3ZGg1QmR1c0owdTJlUm5vd0s0Y3RROHNWVFpyT1pNYTZhbkp1R0QxUXhrYUtKNU9namtUV19nck1iNHE3dTEyYnhvcHJ1RS1OUU1WblpYTjlkbW1MTTB6OXN0dWJjOHBKZ0pVVlpFUkZBWmVkbkpqcHlvcnktNXAtdGZxMU96aVVZWU1xaVQyWkJ6bWxsLWVrMVl5Q1FDa2hSRzM2ZU5sX24yaFotbnRpSi1GcS15U3BDTlRQeW5RWjJjdTRLOE4xXzBveXk4WFYtWkhnSWRfemJ0X21XLXM0U3VQbkNaMkMtcGFGUmNEY3NjMjVDdU9qd1BqcXlwZTl4dmpVaVZTb1BqRVlaamg4NGtHQnJOeG9SUFMyVGtQX19ubEZOYnRGZHY4Z2xjLVJ6N3B1TWo4NW9hN0FPSlFNTllTVS12VUdsTW14UFdHYVZrRTdQS0ZJdTBvTXMwaUpDVTR3anNaU3FkWThnV19laHZIUGtvWlIzNGIybXpnTlRQQ2p3Z3h0WVVyM2gteHFtaXhvUmVJTjVwUjFlenJwdHk5Q19CX3o0X195X0N2MWtwZjdha0t5ckJaLUhBNFhhVHVFUmVNVWFCaVZfYUNMVmIyeTRHYUFLUWVxbDZNMko5aE9SOGFTUUZCdUY0NHFWbmdLZEd5ZDMzanpmUTNVcTFEOEYtMGJKZ3p1YVVKN0FUVV9RWTZwRHhYTjJCaGc0QkpzLVpGeW9GUFJrTEJ3YWtiVkNhNkxjZWR4ZTI2X0V0d25adFZJNDhuUHo3eHZDbTJJdzVhbzZkcEF3Tk55Y2NyNzVyZnpPQ0taUHRkWmZMTk9SSWdhUWNPNG04ZWhRei1QSkpnSkZVTE5jaUdJbTNHUGtWUkQ4dVZ5N2JnWkl4WDFLWVp0X3poVW5KNzUwWEhORGdCdDVtUGgtZW9xcTFfc19sZm83RGdFRV9DMUt3NnUwb1o5cm12bFJsd2prc2N0dTFsc2l0dE5xaG5GSjluWWNGRlhrZkpUTFV1dm1PZDQxSmptNHk4LUoyYmpTM3hNM25Xb0dNM0FCUHFqazBxUFFtbGdvTUo4RmppelV0anVJeTg3QlNuMDRWOWp0YUZmYWRnX0g1Ym10aWVwUVlDN3lES1J6Z0xpX1VqazZsUWtkSUpHOTlnY1dOZV85OHNqNmhpSDVBWTBjZHUzNWlzUjNqR2Rqclh4bkJ6bGx0Y0NPRDFXelAwcnk0bzlxVFRkendYUHF2ZGoxTXhuQS1yOFNtUG0ya2xCdWN6UDBzcnF0Z0pfMVItRnlOdS0ybllLdGNhMGFHcWRfZ1U3ZDRxUVdTeXZRU2U4SWV2M1BzNm1ieHVjVXpHbnB3YjY1N0syWXZjaTZpQjFJUFhnSWlsRVV5UmZ4NnU2VDNteHVmTVBxWmdYemVHOTFrN1dwdEhwRU1yNU8zRWNlNUR1M3FKM2U1UjZNbFlZRUFLNHlmZVBoS2p2OTl5Ympwa2xreURLV2F4QkpJTUNZOHdKV0JGR2FCSzdwdjBnaHBGaWc4Y1NGYmdyNE1qVzRpbG5jYnJoWTBERjBlcnA5cTBOck5vdThObi1XSWZPa0lqVHhIenMyNGk5RVk0ZTZQZ3ZJMlpOSkkzLV83ZndoOEtrRUdfSmEyTWdYX2c1TndQbERlQU9mRy03VW96WEpSNWRoQjNmakozRXhsbGhndVl6cnJsNmhsYzZSemtVcTBpa0drekFySFlUcEowVEJiaTZhU25laU9zWmZHcU9yVDgtOFBiTExOZGdHMVEwM2dSR1R1aDBzZVFlLVJVbHpjYnh1Y003UWxUeHR1cWRta2c1cEZKQmN4c2M5djBFbkh1SGdGa0pibERYRWl6M1Ytb25WdjBoSklLcnFfdS11em9rNHRzQkFuTTFMLTNaSjVjSFp1WWNYZnpLbERUNWUxRFVlTHY4NTRJemIzRjVNRHVoN24teFZCZngzYkpGb2ZZUmdfb01UVTNIUGExaGFEdmtQME5hSnBVaGpyXzBzZDRHQ0ZOdHQ3NVJGTHh0NjdfbjMyakxRNHU0TjMwSUdhaTFSbnIyQTJJb0dwZG4yY1hVVzUtSlpxa0h4SEw0RU92aUxaLU1aT01yalp1X0xpVVlFdHg4WDlXY21XRTdSclU4X1E0djFwaVZzLUtic0tDODRXRFlrdWxjbTdsbUVzbG1talkwd283TmFjM2pCOUpTQ1gzUUg2Zm5QcEpOd000b1Q1ck9HTzd6VFcxdjlGTDg1U0dnWWRDQ0xaZi1VRU1jRGMzeW5OVmlpM051ZjlKSl8zNlUyVVJfN0x1YXFFcEZqZlU5VTRxdy1XektORHlHeEx2bmZ2R1UtU1NJbFppV2psMGlsRndfd1JGeVl3LVktZVprcG13WmlIMW1YSEg5YWlQblpQV0cwakhjdHRSRHdWZjA2cXoyYU8tOF9wNmFJQllMWUgzeldPQlpLR1R3V2QtcmtCcTJrNlY2aHFiM0piVmZzcFY1clV6TnRKZmZDOFczWDBqdTZZUnc3ZmN1cDFFR1RUS3YxOF9OMEZMVngtWFBvYjNDTFhWeEdVeHJaN0FDU0dmNjFVWTlHYktjdUJLUk1TZkV5TjVBZGVtdC1icG9wOFFxZmozNUt4UzU4VTFEbFlkNkJ0T2pJTGc3Q1RUb01ZRktkaFk5SjE3SmU0Q2x4QXAtcnN0TkFpWVpTWF9yTkJXaU16ZTJ3YWkxUGI1M1Yxd2NYTHlJQ3Qya2dWZE5jTTBjTDBJdE5sTk5iWDhPWjZDV1Fxck9tNVhNX1BnTnE1M29KNlpNSHZXckJtbVlQ)
        BUNDLE_ID: "com.tilsim.tilsimtest"
        APP_STORE_ID: 1573396426
      flutter: stable
      xcode: latest
      cocoapods: default
    scripts:
      - name: Set up keychain to be used for codesigning using Codemagic CLI 'keychain' command
        script: |
          keychain initialize
      - name: Fetch signing files
        script: |
          app-store-connect fetch-signing-files $BUNDLE_ID --type IOS_APP_STORE --create
      - name: Use system default keychain
        script: |
          keychain add-certificates
      - name: Set up code signing settings on Xcode project
        script: |
          xcode-project use-profiles
      - name: Get Flutter packages
        script: |
          cd . && flutter packages pub get
      - name: Flutter analyze
        script: |
          cd . && flutter analyze
      - name: Flutter unit tests
        script: |
          cd . && flutter test
        ignore_failure: true          
      - name: Install pods
        script: |
          find . -name "Podfile" -execdir pod install \;
      - name: Flutter build ipa and automatic versioning
        script: |
          flutter build ipa --release \
          --build-name=1.0.0 \
          --build-number=1.0.0 \
          --export-options-plist=/Users/builder/export_options.plist
    artifacts:
      - build/ios/ipa/*.ipa
      - /tmp/xcodebuild_logs/*.log
      - flutter_drive.log
    publishing:
      email:
        recipients:
          - gokhan_eryigit@aof.anadolu.edu.tr
          - toprak6na@gmail.com
        notify:
          success: true     # To receive a notification when a build succeeds
          failure: false    # To not receive a notification when a build fails
      app_store_connect:
        api_key: Encrypted(Z0FBQUFBQmcxMVNwdEQ5cmVMcVo5cS1rQjJTZ1NWYTU3Yks0MEprMnBuZFAzWWlYMTFNcHV4RHk5d3RZd0VQbWkwamhnMDF5QmZHdWh0Q3U0dGtfX2I2cXNMdTRtb0ZHZFFsX25OLTBVaFppZjJfY21fN0VYOFNUeXlHWVlGdncwZVI2a29MWURkQ29KSGRmWEJmREtxUDhzX2dfQ2ZGT3dMTkpJaGc2ek1MTEc2TGVBOXdtVXVYaGU4NlYwenBsZUZ6VlpqR19oMjlqSWtaRk1xZzF6NWgyZUExRGZUT3lzeGUtbVBYSTVWWUlBRWRVUEZZMXdLeDdmbWhTeldLOVhYU1FaWDhDdXlPQ18wcGlVYTdBUHhUNERaSUg1QjJ2ZlJ1bjhfQ3MydTl5YmE2ZkZXa1F0OFhLd19aNzdSRzhfSmVURlJ2MDIwMS1na0VIcWtZY2dZN3EyY2Nxdnh6Rlk2TVU2S0U2RFgyZWlPWUp2VFZsZ0FXdDRWSW5nZDdUcDVSZC15akNvRjhhb1BleW11cWJJaHVBbVBqQVJTal9QV2NYTXRTWHRlV1p6bXVURTltZXI4VT0=)
        key_id: MA7ST43YZ4
        issuer_id: 7386957b-009f-48f8-8824-840dab310cac
        submit_to_testflight: true
